{"ast":null,"code":"var _jsxFileName = \"D:\\\\Study\\\\React js\\\\Crud\\\\crud\\\\src\\\\pages\\\\Books.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport '../App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Books() {\n  _s();\n  const [data, setData] = useState([]);\n  const [filteredData, setFilteredData] = useState([]);\n  const [error, setError] = useState(null);\n  const [filterText, setFilterText] = useState('');\n  const [sortBy, setSortBy] = useState('asc'); // Default sorting is ascending\n\n  useEffect(() => {\n    const fetchAllBooks = async () => {\n      try {\n        const res = await axios.get(\"http://localhost:3001/\");\n        setData(res.data);\n        setFilteredData(res.data); // Initialize filteredData with all books\n      } catch (err) {\n        console.error(\"Error fetching books:\", err);\n        setError(\"Error fetching books. Please check the server.\");\n      }\n    };\n    fetchAllBooks();\n  }, []);\n  const handledelete = async id => {\n    console.log(id);\n    try {\n      await axios.delete(\"http://localhost:3001/books/\" + id);\n      window.location.reload();\n      alert(\"Book Was Deleted!\");\n    } catch (err) {\n      console.error(\"Error deleting book:\", err);\n      setError(\"Error deleting the book. Please check the server.\");\n    }\n  };\n  useEffect(() => {\n    const filteredBooks = data.filter(book => book.title.toLowerCase().includes(filterText.toLowerCase()));\n\n    // Sort the filtered books based on price\n    if (sortBy === 'asc') {\n      filteredBooks.sort((a, b) => a.price - b.price);\n    } else if (sortBy === 'desc') {\n      filteredBooks.sort((a, b) => b.price - a.price);\n    }\n    setFilteredData(filteredBooks);\n  }, [data, filterText, sortBy]);\n  const toggleSortOrder = () => {\n    setSortBy(sortBy === 'asc' ? 'desc' : 'asc');\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"mainpage\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Books Available in Store!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      placeholder: \"Search by book name\",\n      value: filterText,\n      onChange: e => setFilterText(e.target.value)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: toggleSortOrder,\n      children: [\"Sort \", sortBy === 'asc' ? 'Ascending' : 'Descending']\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"main\",\n      children: filteredData.map((item, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: `http://localhost:3001/images/` + item.cover,\n          alt: \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: item.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: item.disc\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: /*#__PURE__*/_jsxDEV(\"b\", {\n            children: [\"Rs \", item.price, \"/=\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"delete\",\n          onClick: () => handledelete(item.id),\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"update\",\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            to: `/Edit/${item.id}`,\n            children: \"Update\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 13\n        }, this)]\n      }, i, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      children: /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/Add\",\n        children: \"Add Book\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 5\n  }, this);\n}\n_s(Books, \"QsbfiZjec7gxvx2DtCaSorNLsqo=\");\n_c = Books;\nexport default Books;\nvar _c;\n$RefreshReg$(_c, \"Books\");","map":{"version":3,"names":["React","useEffect","useState","axios","Link","jsxDEV","_jsxDEV","Books","_s","data","setData","filteredData","setFilteredData","error","setError","filterText","setFilterText","sortBy","setSortBy","fetchAllBooks","res","get","err","console","handledelete","id","log","delete","window","location","reload","alert","filteredBooks","filter","book","title","toLowerCase","includes","sort","a","b","price","toggleSortOrder","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","value","onChange","e","target","onClick","map","item","i","src","cover","alt","disc","to","_c","$RefreshReg$"],"sources":["D:/Study/React js/Crud/crud/src/pages/Books.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport '../App.css';\r\n\r\nfunction Books() {\r\n  const [data, setData] = useState([]);\r\n  const [filteredData, setFilteredData] = useState([]);\r\n  const [error, setError] = useState(null);\r\n  const [filterText, setFilterText] = useState('');\r\n  const [sortBy, setSortBy] = useState('asc'); // Default sorting is ascending\r\n\r\n  useEffect(() => {\r\n    const fetchAllBooks = async () => {\r\n      try {\r\n        const res = await axios.get(\"http://localhost:3001/\");\r\n        setData(res.data);\r\n        setFilteredData(res.data); // Initialize filteredData with all books\r\n      } catch (err) {\r\n        console.error(\"Error fetching books:\", err);\r\n        setError(\"Error fetching books. Please check the server.\");\r\n      }\r\n    };\r\n\r\n    fetchAllBooks();\r\n  }, []);\r\n\r\n  const handledelete = async (id) => {\r\n    console.log(id);\r\n    try {\r\n      await axios.delete(\"http://localhost:3001/books/\" + id);\r\n      window.location.reload();\r\n      alert(\"Book Was Deleted!\");\r\n    } catch (err) {\r\n      console.error(\"Error deleting book:\", err);\r\n      setError(\"Error deleting the book. Please check the server.\");\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const filteredBooks = data.filter((book) =>\r\n      book.title.toLowerCase().includes(filterText.toLowerCase())\r\n    );\r\n\r\n    // Sort the filtered books based on price\r\n    if (sortBy === 'asc') {\r\n      filteredBooks.sort((a, b) => a.price - b.price)\r\n    }\r\n    else if (sortBy === 'desc') {\r\n      filteredBooks.sort((a, b) => b.price - a.price)\r\n    }\r\n\r\n\r\n    setFilteredData(filteredBooks);\r\n  }, [data, filterText, sortBy]);\r\n\r\n  const toggleSortOrder = () => {\r\n    setSortBy(sortBy === 'asc' ? 'desc' : 'asc');\r\n  };\r\n\r\n  return (\r\n    <div className=\"mainpage\">\r\n      <h1>Books Available in Store!</h1>\r\n      <input\r\n        type=\"text\"\r\n        placeholder=\"Search by book name\"\r\n        value={filterText}\r\n        onChange={(e) => setFilterText(e.target.value)}\r\n      />\r\n      <button onClick={toggleSortOrder}>\r\n        Sort {sortBy === 'asc' ? 'Ascending' : 'Descending'}\r\n      </button>\r\n      <div className=\"main\">\r\n        {filteredData.map((item, i) => (\r\n          <div className=\"card\" key={i}>\r\n            <img src={`http://localhost:3001/images/` + item.cover} alt=\"\" />\r\n            <h3>{item.title}</h3>\r\n            <p>{item.disc}</p>\r\n            <p>\r\n              <b>Rs {item.price}/=</b>\r\n            </p>\r\n            <button className=\"delete\" onClick={() => handledelete(item.id)}>\r\n              Delete\r\n            </button>\r\n            <button className=\"update\">\r\n              <Link to={`/Edit/${item.id}`}>Update</Link>\r\n            </button>\r\n          </div>\r\n        ))}\r\n      </div>\r\n      <button>\r\n        <Link to=\"/Add\">Add Book</Link>\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Books;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}